(()=>{let t='[bmg-custom-list = "month"]',e=".w-dyn-item",o=".journey_tab-link",r="is--current",s=".journey_tab-upper",c='[bmg-custom-list = "journeyTabCurrentParent"]';function d(t,e){t.css("scroll-snap-type","none"),t.stop().animate({scrollLeft:e},700,()=>t.css("scroll-snap-type","x mandatory"))}function l(t){let e=[];return t.each(function(t){e.push({$:$(this),name:$(this).find(".text-size-large").text()})}),e}function a(){let t=$(".journey_years").find(".w--current").next().text();return""!=t?`Continue to ${t}`:"Return to start"}$(".w-dyn-list").each(function(){let f=$(this).find(".w-dyn-items"),u=$('[bmg-custom-list = "tabs-menu"]'),h=u.find(o),p=$(this).parent().find('[bmg-custom-list = "prev"]'),m=$(this).parent().find('[bmg-custom-list = "next"]'),b=$(this).parent().find('[bmg-custom-list = "next-slide"]'),x,g,y,w=l(h),_=0,C,k,v=a();function T(){x=$(window).width(),g=f.find(e).length,C=h.width(),k=u[0].scrollWidth-x}function j(t){d(f,Math.min(Math.max(y+=t,0),g-1)*x)}function L(){y=f.scrollLeft()/x;let d=f.find(e).eq(y),l=d.find(t).text();for(nextCategoryText=($nextDynItem=d.next()).find('[bmg-custom-list = "category"]').text(),newSlideNextText=g>y+1?`${y+2}/${g} - ${nextCategoryText}`:v,b.text(newSlideNextText),gsap.to(m[0],{opacity:1,pointerEvents:"auto",duration:.35}),gsap.to(p[0],{opacity:1,pointerEvents:"auto",duration:.35}),i=0,n=w.length;i<n;i++)if(w[i].name==l||""==l){let a=h.find(c);a.each(function(t){if(t!=i){let e=$(this).closest(o),r=e.find(s);e.css({"border-left-width":"1px"}),e.hasClass("is--last")||e.css({"border-right-width":"0px"}),gsap.to($(this)[0],{height:0,duration:.35}),gsap.to(r[0],{opacity:1,duration:.35}),gsap.to(e[0],{borderTopWidth:1,borderTopColor:"rgba(255, 255, 255, 0.2)",duration:.35})}});let u=a.closest(o).eq(_);u.css({"border-left-width":"1px","border-right-width":"1px"}),u.next().css({"border-left-width":"0px"}),u.removeClass(r),_=i;let C=w[i].$.find(c),k=C.closest(o),T=k.find(s);k.addClass(r),k.prev().css({"border-right-width":"0px"}),k.css({"border-left-width":"1px","border-right-width":"1px"}),k.next().css({"border-left-width":"0px"}),gsap.to(C[0],{height:"auto",duration:.35}),gsap.to(T[0],{opacity:0,duration:.35}),gsap.to(k[0],{borderTopWidth:3,borderTopColor:"#fff",duration:.35}),q(i,!1);break}}function q(o,r){if(eventCount=parseInt(h.eq(o).find('[fs-countitems-element = "value"]').text()),u.stop().animate({scrollLeft:Math.min(C*o,k)},700),r&&eventCount){let s=f.find(e),c=w[o].name,l=0;s.each(function(e){if((""==$(this).find(t).text()?w[0].name:$(this).find(t).text())==c)return l=e,!1}),d(f,l*x)}}$(window).resize(T),f.click(()=>{T(),L()}),T(),L(),f.scroll(function(){f.scrollLeft()%x==0&&L()}),p.click(()=>{j(-1)}),m.click(()=>{j(1)}),h.each(function(t){$(this).click(()=>{q(t,!0)})})})})();
