(()=>{let t='[bmg-custom-list = "month"]',e=".w-dyn-item",o=".journey_tab-link",r="is--current",s=".journey_tab-upper",a='[bmg-custom-list = "journeyTabCurrentParent"]';function c(t,e){t.css("scroll-snap-type","none"),t.stop().animate({scrollLeft:e},700,()=>t.css("scroll-snap-type","x mandatory"))}function d(t){let e=[];return t.each(function(t){e.push({$:$(this),name:$(this).find(".text-size-large").text()})}),e}function l(){let t=$(".journey_years").find(".w--current").next().text();return""!=t?`Continue to ${t}`:"Return to start"}$(".w-dyn-list").each(function(){let u=$(this).find(".w-dyn-items"),f=$('[bmg-custom-list = "tabs-menu"]'),p=f.find(o),h=$(this).parent().find('[bmg-custom-list = "prev"]'),m=$(this).parent().find('[bmg-custom-list = "next"]'),b=$(this).parent().find('[bmg-custom-list = "next-slide"]'),x,_,y,g=d(p),w=0,v,C,k=l();function E(){x=$(window).width(),_=u.find(e).length,v=p.width(),C=f[0].scrollWidth-x}function T(t){c(u,Math.min(Math.max(y+=t,0),_-1)*x)}function j(){y=u.scrollLeft()/x;let c=u.find(e).eq(y),d=c.find(t).text();for(nextCategoryText=($nextDynItem=c.next()).find('[bmg-custom-list = "category"]').text(),newSlideNextText=_>y+1?`${y+2}/${_} - ${nextCategoryText}`:k,b.text(newSlideNextText),_<=1?(gsap.set(b.parent()[0],{opacity:1}),gsap.to(m[0],{opacity:1,pointerEvents:"auto",duration:.35}),gsap.to(h[0],{opacity:1,pointerEvents:"auto",duration:.35})):y+1>=_?(gsap.set(b.parent()[0],{opacity:1}),gsap.to(m[0],{opacity:1,pointerEvents:"auto",duration:.35}),gsap.to(h[0],{opacity:1,pointerEvents:"auto",duration:.35})):(gsap.to(m[0],{opacity:1,pointerEvents:"auto",duration:.35}),gsap.to(h[0],{opacity:1,pointerEvents:"auto",duration:.35})),i=0,n=g.length;i<n;i++)if(g[i].name==d||""==d){let l=p.find(a);l.each(function(t){if(t!=i){let e=$(this).closest(o),r=e.find(s);e.css({"border-left-width":"1px"}),e.hasClass("is--last")||e.css({"border-right-width":"0px"}),gsap.to($(this)[0],{height:0,duration:.35}),gsap.to(r[0],{opacity:1,duration:.35}),gsap.to(e[0],{borderTopWidth:1,borderTopColor:"rgba(255, 255, 255, 0.2)",duration:.35})}});let f=l.closest(o).eq(w);f.css({"border-left-width":"1px","border-right-width":"1px"}),f.next().css({"border-left-width":"0px"}),f.removeClass(r),w=i;let v=g[i].$.find(a),C=v.closest(o),E=C.find(s);C.addClass(r),C.prev().css({"border-right-width":"0px"}),C.css({"border-left-width":"1px","border-right-width":"1px"}),C.next().css({"border-left-width":"0px"}),gsap.to(v[0],{height:"auto",duration:.35}),gsap.to(E[0],{opacity:0,duration:.35}),gsap.to(C[0],{borderTopWidth:3,borderTopColor:"#fff",duration:.35}),L(i,!1);break}}function L(o,r){if(eventCount=parseInt(p.eq(o).find('[fs-countitems-element = "value"]').text()),f.stop().animate({scrollLeft:Math.min(v*o,C)},700),r&&eventCount){let s=u.find(e),a=g[o].name,d=0;s.each(function(e){if((""==$(this).find(t).text()?g[0].name:$(this).find(t).text())==a)return d=e,!1}),c(u,d*x)}}$(window).resize(E),u.click(()=>{E(),j()}),E(),j(),u.scroll(function(){u.scrollLeft()%x==0&&j()}),h.click(()=>{T(-1)}),m.click(()=>{T(1)}),p.each(function(t){$(this).click(()=>{L(t,!0)})})})})();
